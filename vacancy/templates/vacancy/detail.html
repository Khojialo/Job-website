{% extends 'base.html' %}

{% block title %}
{{ block.super}}: {{ title }}
{% endblock title %}

{% block content %}

<h1>{{ vacancy.title }}</h1>

<div style="margin-bottom: 15px; font-size: 14px; color: #555;">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"
       stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" width="16" height="16"
       style="vertical-align: middle; margin-right: 4px;">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
        <circle cx="12" cy="12" r="3"></circle>
    </svg>
    {{ vacancy.views }}
    <span style="margin-left: 15px;">Qo‘shilgan vaqti: {{ vacancy.created|date:"d/m/Y H:i:s" }}</span>
    <span style="margin-left: 15px;">Kategoriyasi:
        <a href="{% url 'vacancy_by_category' vacancy.category.id %}">{{ vacancy.category.name }}</a>
    </span>
</div>

{% if vacancy.image %}
<img src="{{ vacancy.image.url }}" alt="Elon rasmi"
     style="width:100%; max-height:400px; object-fit:cover; margin: 15px 0;"/>
{% endif %}

<p>{{ vacancy.description|linebreaks }}</p>
<p>Salary: {{ vacancy.salary }}</p>

<p>
    Phone:
    <span id="phone-field" style="cursor: pointer; color: blue; text-decoration: underline;">
        **** **** ****
    </span>
</p>

{% if vacancy.video %}
<video controls style="width: 100%; max-height: 400px; margin-top: 20px;">
    <source src="{{ vacancy.video.url }}" type="video/mp4"/>
    Sizning brauzeringiz video formatini qo‘llab-quvvatlamaydi.
</video>
{% endif %}

{% if user.is_staff %}
<div style="margin-top: 20px;">
    <!-- Update tugma -->
    <a href="{% url 'update_vacancy' vacancy_id=vacancy.pk %}"
       style="display: inline-block; margin-right: 10px; padding: 6px 10px; background-color: orange; color: white; text-decoration: none; border-radius: 4px; font-weight: bold; font-size: 14px;"
       title="Tahrirlash">
        <!-- Pencil ikonka SVG (stroke qora) -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="black" stroke-width="2"
             stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" width="16" height="16"
             style="vertical-align: middle; margin-right: 4px;">
            <path d="M12 20h9"/>
            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
        </svg>
        Update
    </a>

    <!-- Delete tugma -->
    <a href="{% url 'delete_vacancy' vacancy_id=vacancy.pk %}"
       style="display: inline-block; padding: 6px 10px; background-color: red; color: white; text-decoration: none; border-radius: 4px; font-weight: bold; font-size: 14px;"
       title="O‘chirish">
        <!-- Trash ikonka SVG (stroke qora) -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="black" stroke-width="2"
             stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" width="16" height="16"
             style="vertical-align: middle; margin-right: 4px;">
            <polyline points="3 6 5 6 21 6"/>
            <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
            <path d="M10 11v6"/>
            <path d="M14 11v6"/>
            <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/>
        </svg>
        Delete
    </a>
</div>
{% endif %}


{% endblock content %}
