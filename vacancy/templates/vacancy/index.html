{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>So'nggi E'lonlar</h1>

    <div class="news-cards">
        {% for vacancy in vacancies %}
        <div class="news-card">
            <a href="{% url 'vacancy_detail' vacancy.pk %}">
                {% if vacancy.image %}
                <img src="{{ vacancy.image.url }}" alt="Elonlar rasmi"/>
                {% endif %}
            </a>
            <div class="news-card-content">
                <h3>{{ vacancy.title }}</h3>
                <p>{{ vacancy.description|truncatewords:6 }}</p>
                <p>Salary: {{ vacancy.salary }}</p>
                <div class="news-card-meta">
                    <span class="views">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" width="16" height="16"
                             style="vertical-align: middle; margin-right: 4px;">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        {{ vacancy.views }}
                    </span>
                    <span>Qoâ€˜shilgan vaqti: </span>
                </div>

                {% if user.is_staff %}
                <div class="news-card-actions mt-2">
                    <!-- Update tugmasi -->
                    <a href="{% url 'update_vacancy' vacancy_id=vacancy.pk %}" title="O'zgartirish" aria-label="Edit">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" width="20" height="20">
                            <path d="M12 20h9"/>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
                        </svg>
                    </a>

                    <!-- Delete tugmasi -->
                    <a href="{% url 'delete_vacancy' vacancy_id=vacancy.pk %}" title="O'chirish" aria-label="Delete">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" width="20" height="20">
                            <polyline points="3 6 5 6 21 6"/>
                            <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
                            <path d="M10 11v6"/>
                            <path d="M14 11v6"/>
                            <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/>
                        </svg>
                    </a>
                </div>
                {% endif %}

            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock content %}
